<!--
  This template loads for the 'tab.friend-detail' state (app.js)
  'friend' is a $scope variable created in the FriendsCtrl controller (controllers.js)
  The FriendsCtrl pulls data from the Friends service (service.js)
  The Friends service returns an array of friend data
-->
<ion-view view-title="{{chat.name}}">
  <ion-content class="padding">
    <img ng-src="{{chat.face}}" style="width: 64px; height: 64px">
    <p>
      {{chat.lastText}}
    </p>
  </ion-content>
</ion-view>


<ion-view view-title="Chat Room">
  <ion-content>
    <ion-list ng-show="roomName">
      <ion-item class="item item-input-inset">
          <label class="item-input-wrapper">
              <input type="text" ng-model="IM.textMessage" placeholder="Type in your message...">
          </label>
          <button ng-click="sendMessage(IM.textMessage)" class="button button-small button-balanced">
              Send
          </button>
      </ion-item>
      <ion-item ng-hide="chats" class="textCenter">
          <i class="icon ion-loading-c"></i> Loading Chats
      </ion-item>
      <ion-item ng-if="chats.length == 0" class="textCenter">
          <h4>No messages in this room. Send message to start.</h4>
      </ion-item>
      <ion-item class="" ng-repeat="chat in chats | orderBy:'createdAt':true" type="item-text-wrap">
          <h4>{{chat.from}} :</h4>
          <span am-time-ago="chat.createdAt" class="item-note">
          </span>
          <p>{{chat.message}}</p>
          <ion-option-button class="button-assertive" ng-click="remove(chat)">
              Delete
          </ion-option-button>
      </ion-item>
    </ion-list>
    <ion-list ng-hide="roomName">
      <ion-item class="textCenter">
          <h4>Please select a room to chat first.</h4>
      </ion-item>
    </ion-list>

  </ion-content>
</ion-view>